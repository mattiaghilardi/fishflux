<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Intro to fishflux • fishflux</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Intro to fishflux">
<meta property="og:description" content="fishflux">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fishflux</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/intro_to_fishflux.html">Intro to fishflux</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/nschiett/fishflux/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="intro_to_fishflux_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Intro to fishflux</h1>
                        <h4 data-toc-skip class="author">Nina M. D. Schiettekatte</h4>
            
            <h4 data-toc-skip class="date">2021-04-19</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/nschiett/fishflux/blob/master/vignettes/intro_to_fishflux.Rmd" class="external-link"><code>vignettes/intro_to_fishflux.Rmd</code></a></small>
      <div class="hidden name"><code>intro_to_fishflux.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>The <code>fishflux</code> package provides a tool to model fluxes of C (carbon), N (nitrogen) and P (phosphorus) in fishes. It combines basic principles from elemental stoichiometry and metabolic theory. The package offers a user-friendly interface to apply the model. <code>fishflux</code> is ideal for fish ecologists wishing to predict ingestion, egestion and excretion to study fluxes of nutrients and energy.</p>
<p>Main assets:</p>
<ul>
<li>Provides function to model fluxes of Carbon, Nitrogen and Phosphorus for fishes</li>
<li>Allows for the estimation of uncertainty, dpending on the uncertainy of the input parameters</li>
<li>Provides some functions to help find parameters as inputs for the model</li>
<li>Provides functions to extract and illustrate results</li>
</ul>
</div>
<div id="installing-and-loading-fishflux" class="section level2">
<h2 class="hasAnchor">
<a href="#installing-and-loading-fishflux" class="anchor"></a>Installing and loading fishflux</h2>
<p><code>fishflux</code> uses Markov Chain Monte Carlo simulations provided by <a href="https://github.com/stan-dev/rstan/wiki/RStan-Getting-Started" class="external-link">stan</a>. Therefore, the first step is to install <a href="https://github.com/stan-dev/rstan/wiki/RStan-Getting-Started" class="external-link">rstan</a>. It’s important to closely follow all the steps described on the page depending on your operating system.</p>
<div id="github" class="section level3">
<h3 class="hasAnchor">
<a href="#github" class="anchor"></a>GitHub</h3>
<p>The best way to install the latest development version of <code>fishflux</code> is to install it from GitHub.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"nschiett/fishflux"</span>, dependencies <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># if errors are returned, try adding `args = "--preclean"` to `install_github`</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://nschiett.github.io/fishflux/" class="external-link">fishflux</a></span><span class="op">)</span></code></pre></div>
</div>
<div id="cran" class="section level3">
<h3 class="hasAnchor">
<a href="#cran" class="anchor"></a>CRAN</h3>
<p><code>fishflux</code> will be available on CRAN in the future:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"fishflux"</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://nschiett.github.io/fishflux/" class="external-link">fishflux</a></span><span class="op">)</span></code></pre></div>
</div>
<div id="downloaded-package-file" class="section level3">
<h3 class="hasAnchor">
<a href="#downloaded-package-file" class="anchor"></a>Downloaded package file</h3>
<p>Another option is to download the source file available on GitHub <a href="https://github.com/nschiett/fishflux" class="external-link">here</a>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="va">path_to_fishflux_file</span>, repos <span class="op">=</span> <span class="cn">NULL</span>, type <span class="op">=</span> <span class="st">"source"</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://nschiett.github.io/fishflux/" class="external-link">fishflux</a></span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="how-to-use-fishflux" class="section level2">
<h2 class="hasAnchor">
<a href="#how-to-use-fishflux" class="anchor"></a>How to use fishflux?</h2>
<p><code>fishflux</code> is designed to follow three simple steps:</p>
<ul>
<li>Find the right input parameters</li>
<li>Run the model simulation with those input parameters</li>
<li>Plot the model results and check sensitivity</li>
</ul>
<div id="input-parameters" class="section level3">
<h3 class="hasAnchor">
<a href="#input-parameters" class="anchor"></a>Input parameters</h3>
<p>Before running the model, the parameters have to be specified. Below, there is a table showing all parameters needed to run the model simulation. <code>fishflux</code> provides several functions to find some of these parameters, but note that others have to be provided by the user at this stage. Ideally, all parameters should also have a standard deviation, so that their uncertainty can be reflected in the model predictions </p>
<table class="table">
<caption>
. Overview of inputs, including input parameters, to be specified by the user of the model. k indicates c, n or p. VBGC = von Bertalanffy growth curve.
</caption>
<thead><tr class="header">
<th style="text-align: left;">
Symbol
</th>
<th style="text-align: left;">
Description
</th>
<th style="text-align: left;">
Unit
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">
<span class="math inline"><em>a</em><sub>k</sub></span>
</td>
<td style="text-align: left;">
Element-specific assimilation efficiency
</td>
<td style="text-align: left;">
_
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
<span class="math inline"><em>l</em><sub>t</sub></span>
</td>
<td style="text-align: left;">
Total length of individual
</td>
<td style="text-align: left;">
cm
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<span class="math inline"><em>l</em><em>i</em><em>n</em><em>f</em></span>
</td>
<td style="text-align: left;">
Asymptotic adult length (VBGC)
</td>
<td style="text-align: left;">
cm
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
<span class="math inline"><em>κ</em></span>
</td>
<td style="text-align: left;">
Growth rate parameter (VBGC)
</td>
<td style="text-align: left;">
<span class="math inline">yr<sup> − 1</sup></span>
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<span class="math inline"><em>t</em><sub>0</sub></span>
</td>
<td style="text-align: left;">
Age at settlement (VBGC)
</td>
<td style="text-align: left;">
<span class="math inline">yr</span>
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
<span class="math inline"><em>l</em><em>w</em><sub><em>a</em></sub></span>
</td>
<td style="text-align: left;">
Parameter length-weight relationship
</td>
<td style="text-align: left;">
<span class="math inline">g cm<sup> − 1</sup></span>
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<span class="math inline"><em>l</em><em>w</em><sub><em>b</em></sub></span>
</td>
<td style="text-align: left;">
Parameter length-weight relationship
</td>
<td style="text-align: left;">
_
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
<span class="math inline"><em>Q</em><sub>k</sub></span>
</td>
<td style="text-align: left;">
Element-specific body content percentage
</td>
<td style="text-align: left;">
%
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<span class="math inline"><em>f</em><sub>0</sub></span>
</td>
<td style="text-align: left;">
Metabolic normalisation constant independent of body mass
</td>
<td style="text-align: left;">
<span class="math inline">g Cg<sup> − <em>α</em></sup>d<sup> − 1</sup></span>
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
<span class="math inline"><em>a</em><em>l</em><em>p</em><em>h</em><em>a</em></span>
</td>
<td style="text-align: left;">
Mass-scaling exponent
</td>
<td style="text-align: left;">
_
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<span class="math inline"><em>t</em><em>h</em><em>e</em><em>t</em><em>a</em></span>
</td>
<td style="text-align: left;">
Activity scope
</td>
<td style="text-align: left;">
_
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
<span class="math inline"><em>v</em></span>
</td>
<td style="text-align: left;">
Environmental temperature
</td>
<td style="text-align: left;">
C
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<span class="math inline"><em>h</em></span>
</td>
<td style="text-align: left;">
trophic level
</td>
<td style="text-align: left;">
_
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
<span class="math inline"><em>r</em></span>
</td>
<td style="text-align: left;">
Aspect ratio of caudal fin
</td>
<td style="text-align: left;">
_
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<span class="math inline"><em>F</em>0<em>n</em><em>z</em></span>
</td>
<td style="text-align: left;">
Mass-specific turnover rate of N
</td>
<td style="text-align: left;">
<span class="math inline">g Ng<sup> − 1</sup>d<sup> − 1</sup></span>
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
<span class="math inline"><em>F</em>0<em>p</em><em>z</em></span>
</td>
<td style="text-align: left;">
Mass-specific turnover rate of P
</td>
<td style="text-align: left;">
<span class="math inline">g Pg<sup> − 1</sup>d<sup> − 1</sup></span>
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">
<span class="math inline"><em>m</em><em>d</em><em>w</em></span>
</td>
<td style="text-align: left;">
Ratio of dry mass and wet mass of fish
</td>
<td style="text-align: left;">
_
</td>
</tr>
<tr class="even">
<td style="text-align: left;">
<span class="math inline"><em>D</em><sub>k</sub></span>
</td>
<td style="text-align: left;">
Elemental stoichiometry of diet
</td>
<td style="text-align: left;">
%
</td>
</tr>
</tbody>
</table>
<p>A good place to start is checking if you are using the correct scientific name of your species of interest. The function <code>name_errors</code> will tell you if the species name is correct. This function can be useful, especially when working with larger databases.</p>

<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># example</span>
<span class="fu">fishflux</span><span class="fu">::</span><span class="fu"><a href="../reference/name_errors.html">name_errors</a></span><span class="op">(</span><span class="st">"Zebrazoma scopas"</span><span class="op">)</span>
<span class="co">#&gt; Inaccurate species names found:</span>
<span class="co">#&gt; [1] "Zebrazoma scopas"</span></code></pre></div>

<p>Once the species names are verified and/or corrected we can continue with specifying some parameters.</p>
<p>The <code>find_lw</code> function searches <a href="https://www.fishbase.de/" class="external-link">FishBase</a> to find length-weight relationship parameters <code>lw_a</code> and <code>lw_b</code> extracted from <span class="citation">Froese and Pauly (2018)</span>.</p>

<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># example</span>
<span class="fu">fishflux</span><span class="fu">::</span><span class="fu"><a href="../reference/find_lw.html">find_lw</a></span><span class="op">(</span><span class="st">"Zebrasoma scopas"</span>, mirror <span class="op">=</span> <span class="st">"se"</span><span class="op">)</span>
<span class="co">#&gt;            species   lwa_m     lwa_sd lwb_m    lwb_sd</span>
<span class="co">#&gt; 1 Zebrasoma scopas 0.02455 0.00269898  2.98 0.0255102</span></code></pre></div>

<p>The model uses parameters von Bertalanffy’s growth model (VBGM) to estimate growth rates. A quick way to get available information from FishBase is the function <code><a href="../reference/growth_params.html">growth_params()</a></code>. This can be a good indication, but users should interpret these estimates with a critical eye, as they come from disparate sources of varying accuracy. Alternatively, it is advised to use growth curves derived from otolith readings. In the absence of otolith data, one might consider extracting standardised estimations from <span class="citation">Morais and Bellwood (2018)</span>.</p>

<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># example</span>
<span class="co"># The option otolith=TRUE filters out sources that used otoliths for the estimation of growth parameters</span>
<span class="fu">fishflux</span><span class="fu">::</span><span class="fu"><a href="../reference/growth_params.html">growth_params</a></span><span class="op">(</span><span class="st">"Sargocentron microstoma"</span>, otolith <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1 x 7</span>
<span class="co">#&gt;   species           Locality                k  Linf    t0 method        comments</span>
<span class="co">#&gt;   &lt;chr&gt;             &lt;chr&gt;               &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;   </span>
<span class="co">#&gt; 1 Sargocentron mic… Tiahura reef, Moor…     1  18.6    NA length-frequ… &lt;NA&gt;</span></code></pre></div>

<p>Further, there are a couple more basic functions to get an indication of parameters that are available on FishBase such as <code><a href="../reference/trophic_level.html">trophic_level()</a></code> and <code><a href="../reference/aspect_ratio.html">aspect_ratio()</a></code>.  Note that it is always better to get the approximations through analysis, measurements and otolith analysis over parameters extracted from functions, such as <code><a href="../reference/growth_params.html">growth_params()</a></code>, <code><a href="../reference/trophic_level.html">trophic_level()</a></code> and <code><a href="../reference/aspect_ratio.html">aspect_ratio()</a></code>.  To get an overview of all parameters available, <code>fishflux</code> provides a wrapper function <code><a href="../reference/model_parameters.html">model_parameters()</a></code>. </p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># example</span>
<span class="va">zebsco</span> <span class="op">&lt;-</span> <span class="fu">fishflux</span><span class="fu">::</span><span class="fu"><a href="../reference/model_parameters.html">model_parameters</a></span><span class="op">(</span><span class="st">"Zebrasoma scopas"</span>, family <span class="op">=</span> <span class="st">"Acanthuridae"</span>, temp <span class="op">=</span> <span class="fl">27</span>, mirror <span class="op">=</span> <span class="st">"se"</span><span class="op">)</span>
<span class="co">## Here we set the temperature at 27 degrees as an example, this the average sea temperature in Moorea, French Polynesia</span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">zebsco</span><span class="op">)</span>
<span class="co">#&gt;            species    t0 Linf     k     asp troph   lwa_m     lwa_sd lwb_m</span>
<span class="co">#&gt; 1 Zebrasoma scopas -0.49 13.3 0.425 2.02091     2 0.02455 0.00269898  2.98</span>
<span class="co">#&gt;      lwb_sd     mdw_m        f0_m        f0_sd alpha_m   alpha_sd</span>
<span class="co">#&gt; 1 0.0255102 0.2504833 0.001517989 2.932697e-10    0.77 0.05286288</span></code></pre></div>

<p>All other parameters have to be provided by the user. For more information on how to acquire these parameters, take a look at (“this paper” add reference to methods paper).</p>
</div>
<div id="run-model" class="section level3">
<h3 class="hasAnchor">
<a href="#run-model" class="anchor"></a>Run model</h3>
<p>Once all the parameters are collected, we can run the model through <code><a href="../reference/cnp_model_mcmc.html">cnp_model_mcmc()</a></code>. Note that this model can be run with or without specifying the standard deviation (sd) of each parameter. If the sd of a certain parameter is not provided, it will be automatically set to a very low value (1<sup>-10</sup>). As mentioned before, it is advisable to include uncertainty of parameters. <code>fishflux</code> is designed to use the MCMC sampler in order to include uncertainty of predictions.</p>

<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## load the example parameters for Zebrasoma scopas, a list</span>
<span class="va">param_zebsco</span> <span class="op">&lt;-</span> <span class="fu">fishflux</span><span class="fu">::</span><span class="va"><a href="../reference/param_zebsco.html">param_zebsco</a></span>
<span class="co">## Run the model, specifying the target length(s) and the parameter list</span>
<span class="va">model</span> <span class="op">&lt;-</span> <span class="fu">fishflux</span><span class="fu">::</span><span class="fu"><a href="../reference/cnp_model_mcmc.html">cnp_model_mcmc</a></span><span class="op">(</span>TL <span class="op">=</span> <span class="fl">5</span><span class="op">:</span><span class="fl">20</span>, param <span class="op">=</span> <span class="va">param_zebsco</span><span class="op">)</span></code></pre></div>

<p>The object <code>model</code> now contains all the samples generated from the MCMC simulation and a summary of all parameters generated. To extract certain variables of interest, use the <code><a href="../reference/extract.html">extract()</a></code> function. Predictions for fluxes of C, N and P are all in g / day. </p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">fishflux</span><span class="fu">::</span><span class="fu"><a href="../reference/extract.html">extract</a></span><span class="op">(</span><span class="va">model</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Fn"</span>,<span class="st">"Fp"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;    TL      Fn_mean    Fn_median        Fn_sd      Fn_2.5%    Fn_97.5%</span>
<span class="co">#&gt; 1   5 0.0008878791 0.0008215703 0.0004128497 0.0002819877 0.001810289</span>
<span class="co">#&gt; 2   6 0.0012937452 0.0012194027 0.0005984106 0.0003325178 0.002781195</span>
<span class="co">#&gt; 3   7 0.0017678548 0.0016264862 0.0008464677 0.0004279481 0.003640799</span>
<span class="co">#&gt; 4   8 0.0026656651 0.0024774642 0.0012569680 0.0008143328 0.005858832</span>
<span class="co">#&gt; 5   9 0.0033718963 0.0030384877 0.0017193044 0.0008030942 0.007270090</span>
<span class="co">#&gt; 6  10 0.0045157222 0.0041382641 0.0023720498 0.0011498317 0.010540190</span>
<span class="co">#&gt; 7  11 0.0055051066 0.0049014060 0.0030432590 0.0013742969 0.012543110</span>
<span class="co">#&gt; 8  12 0.0070261052 0.0061866481 0.0041174784 0.0013615972 0.017325667</span>
<span class="co">#&gt; 9  13 0.0089977557 0.0075933158 0.0054941154 0.0023425204 0.022416723</span>
<span class="co">#&gt; 10 14 0.0115729144 0.0099166094 0.0073535653 0.0025291256 0.028839834</span>
<span class="co">#&gt; 11 15 0.0138061558 0.0118686245 0.0088054527 0.0025836609 0.033477884</span>
<span class="co">#&gt; 12 16 0.0168305138 0.0144525909 0.0111038964 0.0032264400 0.042527583</span>
<span class="co">#&gt; 13 17 0.0199593167 0.0178366821 0.0131565870 0.0042320207 0.050958254</span>
<span class="co">#&gt; 14 18 0.0236814714 0.0208164056 0.0150602537 0.0048877993 0.059064183</span>
<span class="co">#&gt; 15 19 0.0276317015 0.0228689687 0.0186960595 0.0067165734 0.072775989</span>
<span class="co">#&gt; 16 20 0.0340744003 0.0294038010 0.0216457698 0.0073576181 0.085209629</span>
<span class="co">#&gt;          Fn_25%      Fn_75%      Fp_mean    Fp_median        Fp_sd      Fp_2.5%</span>
<span class="co">#&gt; 1  0.0005844312 0.001121541 8.566553e-05 4.365811e-05 0.0001123116 2.162964e-06</span>
<span class="co">#&gt; 2  0.0008789380 0.001636349 1.614284e-04 8.990615e-05 0.0001783677 6.561898e-06</span>
<span class="co">#&gt; 3  0.0011761112 0.002226135 2.716112e-04 1.478191e-04 0.0002928365 1.626180e-05</span>
<span class="co">#&gt; 4  0.0017723716 0.003267158 4.770086e-04 2.828036e-04 0.0004965912 1.788969e-05</span>
<span class="co">#&gt; 5  0.0021943825 0.004376385 6.945649e-04 4.044052e-04 0.0007128435 1.945682e-05</span>
<span class="co">#&gt; 6  0.0027462033 0.005676398 1.117364e-03 7.956336e-04 0.0010008397 8.030831e-05</span>
<span class="co">#&gt; 7  0.0032012951 0.007290433 1.451384e-03 1.088776e-03 0.0011979991 8.021838e-05</span>
<span class="co">#&gt; 8  0.0039410827 0.009373346 2.034705e-03 1.648301e-03 0.0016527690 1.241083e-04</span>
<span class="co">#&gt; 9  0.0048482583 0.011963470 2.808995e-03 2.314435e-03 0.0022004613 1.285605e-04</span>
<span class="co">#&gt; 10 0.0059951088 0.015222120 3.822166e-03 3.265342e-03 0.0029028173 2.089220e-04</span>
<span class="co">#&gt; 11 0.0066758920 0.018878268 4.798672e-03 3.984386e-03 0.0035206671 4.234771e-04</span>
<span class="co">#&gt; 12 0.0078927062 0.023456900 6.131006e-03 5.119386e-03 0.0044838451 6.702959e-04</span>
<span class="co">#&gt; 13 0.0091455176 0.027083752 7.511071e-03 6.594743e-03 0.0052616763 1.360282e-03</span>
<span class="co">#&gt; 14 0.0122613646 0.031418469 9.163140e-03 8.029475e-03 0.0059486405 1.677083e-03</span>
<span class="co">#&gt; 15 0.0134032521 0.037317103 1.100439e-02 9.158021e-03 0.0074765982 2.657862e-03</span>
<span class="co">#&gt; 16 0.0168581000 0.046408738 1.349798e-02 1.155140e-02 0.0085752468 2.823320e-03</span>
<span class="co">#&gt;        Fp_97.5%       Fp_25%       Fp_75%</span>
<span class="co">#&gt; 1  0.0003979009 2.281339e-05 9.042723e-05</span>
<span class="co">#&gt; 2  0.0006775705 4.789245e-05 1.977370e-04</span>
<span class="co">#&gt; 3  0.0011131616 7.820827e-05 3.650763e-04</span>
<span class="co">#&gt; 4  0.0017583897 1.409044e-04 6.360775e-04</span>
<span class="co">#&gt; 5  0.0025022372 1.781831e-04 1.009734e-03</span>
<span class="co">#&gt; 6  0.0035998491 3.707525e-04 1.594015e-03</span>
<span class="co">#&gt; 7  0.0043625758 5.089356e-04 2.152075e-03</span>
<span class="co">#&gt; 8  0.0064290374 7.137883e-04 2.956108e-03</span>
<span class="co">#&gt; 9  0.0082616348 1.048618e-03 4.003697e-03</span>
<span class="co">#&gt; 10 0.0104184342 1.553953e-03 5.355768e-03</span>
<span class="co">#&gt; 11 0.0127356697 1.788632e-03 6.934567e-03</span>
<span class="co">#&gt; 12 0.0163848058 2.398432e-03 8.711478e-03</span>
<span class="co">#&gt; 13 0.0198288139 3.060943e-03 1.048612e-02</span>
<span class="co">#&gt; 14 0.0232626536 4.540266e-03 1.222836e-02</span>
<span class="co">#&gt; 15 0.0287294268 5.368635e-03 1.473722e-02</span>
<span class="co">#&gt; 16 0.0336884352 6.739749e-03 1.811009e-02</span></code></pre></div>

</div>
<div id="plot-results" class="section level3">
<h3 class="hasAnchor">
<a href="#plot-results" class="anchor"></a>Plot results</h3>
<p>To visualize main outputs of the model, <code>fishflux</code> contains a plotting function. The function <code><a href="../reference/limitation.html">limitation()</a></code> returns the proportion of iterations of the model simulation that had limitation of C, N and P respectively. The function <code><a href="../reference/plot_cnp.html">plot_cnp()</a></code> plots the predicted output of the model. </p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## limitation</span>
<span class="fu">fishflux</span><span class="fu">::</span><span class="fu"><a href="../reference/limitation.html">limitation</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></code></pre></div>
<p><img src="intro_to_fishflux_files/figure-html/unnamed-chunk-9-1.png" width="768"></p>
<pre><code><a href="../reference/plot_cnp.html">#&gt;    tl nutrient prop_lim
#&gt; 1   5        c    0.000
#&gt; 2   6        c    0.000
#&gt; 3   7        c    0.000
#&gt; 4   8        c    0.000
#&gt; 5   9        c    0.000
#&gt; 6  10        c    0.000
#&gt; 7  11        c    0.000
#&gt; 8  12        c    0.000
#&gt; 9  13        c    0.000
#&gt; 10 14        c    0.010
#&gt; 11 15        c    0.014
#&gt; 12 16        c    0.036
#&gt; 13 17        c    0.094
#&gt; 14 18        c    0.116
#&gt; 15 19        c    0.150
#&gt; 16 20        c    0.130
#&gt; 17  5        n    0.352
#&gt; 18  6        n    0.434
#&gt; 19  7        n    0.468
#&gt; 20  8        n    0.562
#&gt; 21  9        n    0.580
#&gt; 22 10        n    0.694
#&gt; 23 11        n    0.708
#&gt; 24 12        n    0.750
#&gt; 25 13        n    0.802
#&gt; 26 14        n    0.844
#&gt; 27 15        n    0.830
#&gt; 28 16        n    0.858
#&gt; 29 17        n    0.830
#&gt; 30 18        n    0.858
#&gt; 31 19        n    0.836
#&gt; 32 20        n    0.856
#&gt; 33  5        p    0.648
#&gt; 34  6        p    0.566
#&gt; 35  7        p    0.532
#&gt; 36  8        p    0.438
#&gt; 37  9        p    0.420
#&gt; 38 10        p    0.306
#&gt; 39 11        p    0.292
#&gt; 40 12        p    0.250
#&gt; 41 13        p    0.198
#&gt; 42 14        p    0.146
#&gt; 43 15        p    0.156
#&gt; 44 16        p    0.106
#&gt; 45 17        p    0.076
#&gt; 46 18        p    0.026
#&gt; 47 19        p    0.014
#&gt; 48 20        p    0.014
## Plot one variable:
fishflux::plot_cnp(model,  y = "Fp", x = "tl", probs = c(0.5, 0.8, 0.95))</a></code></pre>
<p><img src="intro_to_fishflux_files/figure-html/unnamed-chunk-9-2.png" width="768"></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## Plot multiple variables:</span>
<span class="fu">fishflux</span><span class="fu">::</span><span class="fu"><a href="../reference/plot_cnp.html">plot_cnp</a></span><span class="op">(</span><span class="va">model</span>,  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Fp"</span>, <span class="st">"Gp"</span>, <span class="st">"Ip"</span>, <span class="st">"Wp"</span><span class="op">)</span>, x <span class="op">=</span> <span class="st">"tl"</span>, probs <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></code></pre></div>
<p><img src="intro_to_fishflux_files/figure-html/unnamed-chunk-9-3.png" width="768"></p>
</div>
<div id="sensitivity" class="section level3">
<h3 class="hasAnchor">
<a href="#sensitivity" class="anchor"></a>Sensitivity</h3>
<p>The function <code><a href="../reference/sensitivity.html">sensitivity()</a></code> looks at how the distribution of the input variables affects the uncertainty of the model predictions. Basically, the model is run for each input parameter, while keeping all the others fixed. The output of the function gives a matrix of the width of the 95% CI for all model predictions (columns), depending on the input variables (rows). The input parameters and output variables of interest can be specified by arguments “par” and “out” respectively. </p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">fishflux</span><span class="fu">::</span><span class="fu"><a href="../reference/sensitivity.html">sensitivity</a></span><span class="op">(</span>TL <span class="op">=</span> <span class="fl">10</span>, param <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>k_sd <span class="op">=</span> <span class="fl">0.2</span>, Dn_sd <span class="op">=</span> <span class="fl">0.2</span>, Dc_sd <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>,
            par <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"k_sd"</span>,<span class="st">"Dn_sd"</span>,<span class="st">"Dc_sd"</span><span class="op">)</span>, 
            out <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Ic"</span>, <span class="st">"In"</span>, <span class="st">"Ip"</span>, <span class="st">"Gc"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="intro_to_fishflux_files/figure-html/unnamed-chunk-10-1.png" width="768"></p>
<pre><code>#&gt;            Ic_CI        In_CI        Ip_CI        Gc_CI
#&gt; k_sd  0.03229921 3.875905e-03 1.291968e-03 1.240290e-02
#&gt; Dn_sd 0.24640210 4.762825e-03 9.856084e-03 6.483668e-11
#&gt; Dc_sd 0.01134115 2.611649e-10 8.684438e-11 6.853269e-11</code></pre>

</div>
</div>
<div id="more-information" class="section level2">
<h2 class="hasAnchor">
<a href="#more-information" class="anchor"></a>More information</h2>
<p>For more information on the theoretical framework of the model, see <span class="citation">Schiettekatte et al. (2020)</span> ( <a href="https://doi.org/10.1111/1365-2435.13618" class="external-link">paper</a> ). Every function of <code>fishflux</code> has a help page with more documentation. In the case of errors, bugs or discomfort, you are invited to raise an <a href="https://github.com/nschiett/fishflux/issues" class="external-link">issue</a> on GitHub. <code>fishflux</code> is always in development and we are happy to take your comments or suggestions into consideration.</p>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>references</h2>
<div id="refs" class="references">
<div id="ref-Froese2018">
<p>Froese, R., and D. Pauly. 2018. “FishBase.” <em>World Wide Web Electronic Publication.</em></p>
</div>
<div id="ref-morais2018">
<p>Morais, Renato A, and David R Bellwood. 2018. “Global Drivers of Reef Fish Growth.” <em>Fish and Fisheries</em> 19 (5): 874–89.</p>
</div>
<div id="ref-Schiettekatte2020">
<p>Schiettekatte, N. M. D., D. R. Barneche, S. Villéger, J. E. Allgeier, D. E. Burkepile, S. J. Brandl, J. M. Casey, et al. 2020. “Nutrient Limitation, Bioenergetics, and Stoichiometry: A New Model to Predict Elemental Fluxes Mediated by Fishes.” <em>Functional Ecology</em>, no. Accepted Author Manuscript. <a href="https://doi.org/10.1111/1365-2435.13618" class="external-link">https://doi.org/10.1111/1365-2435.13618</a>.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Nina M. D. Schiettekatte, Diego Barneche.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link external-link">pkgdown</a> 1.6.1.9001.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
